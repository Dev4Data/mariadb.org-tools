USE upgrade_common;
SELECT VERSION() LIKE '%MariaDB%';
VERSION() LIKE '%MariaDB%'
1
INSERT INTO part_range VALUES (1), (10), (100), (1000);
SELECT * FROM part_range;
range_field
1
10
100
1000
ALTER TABLE part_range DROP PARTITION p3;
SELECT * FROM part_range;
range_field
1
10
ALTER TABLE part_range REBUILD PARTITION p0, p1;
SELECT * FROM part_range;
range_field
1
10
INSERT INTO part_list VALUES (1), (2), (3), (4), (5), (6);
SELECT * FROM part_list;
list_field
1
2
3
4
5
6
ALTER TABLE part_list DROP PARTITION p0;
SELECT * FROM part_list;
list_field
3
4
5
6
ALTER TABLE part_list OPTIMIZE PARTITION p1, p2;
Table	Op	Msg_type	Msg_text
upgrade_common.part_list	optimize	status	OK
SELECT * FROM part_list;
list_field
3
4
5
6
INSERT INTO part_hash VALUES (1), (2), (3), (4);
SELECT * FROM part_hash;
hash_field
2
4
1
3
ALTER TABLE part_hash COALESCE PARTITION 1;
SELECT * FROM part_hash;
hash_field
2
4
1
3
INSERT INTO part_key VALUES (1), (2), (3), (4), (5), (6);
SELECT * FROM part_key;
key_field
1
2
3
4
5
6
ALTER TABLE part_key COALESCE PARTITION 1;
SELECT * FROM part_key;
key_field
1
2
3
4
5
6
INSERT INTO subpart values ('1989-01-01'), ('1990-02-02'), ('1991-03-03'), ('2001-04-04');
SELECT * FROM subpart;
purchased
1989-01-01
1990-02-02
1991-03-03
2001-04-04
ALTER TABLE subpart REMOVE PARTITIONING;
SELECT * FROM subpart;
purchased
1989-01-01
1990-02-02
1991-03-03
2001-04-04
INSERT INTO proc_table VALUES (1);
CALL proc1(@out1);
SELECT @out1;
@out1
1
SELECT func1('abcdefgh');
func1('abcdefgh')
abcdefgh
INSERT INTO trig_table1 VALUES (1);
INSERT INTO trig_table1 VALUES (1);
ERROR 23000: Duplicate entry '1' for key 'PRIMARY'
SELECT * FROM trig_table2;
f1
1
INSERT INTO parent VALUES (1);
INSERT INTO child VALUES (1,1);
DELETE FROM parent;
ERROR 23000: Cannot delete or update a parent row: a foreign key constraint fails (`upgrade_common`.`child`, CONSTRAINT `child_ibfk_1` FOREIGN KEY (`parent_id`) REFERENCES `parent` (`id`))
DROP DATABASE upgrade_common;
